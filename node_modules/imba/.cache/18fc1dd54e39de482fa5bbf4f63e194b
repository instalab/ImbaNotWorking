function iter$(a){ return a ? (a.toArray ? a.toArray() : a) : []; };
function Url(loc){
	this._location = loc;
	this;
};

exports.Url = Url; // export class 
Url.prototype.path = function (){
	if (false) {} else {
		// remove trailing slash?
		return this._location.originalUrl.replace(/\b(\/$)/,'');
	};
};


Url.prototype.hash = function (){
	return this._location.hash || '';
};

Url.prototype.setHash = function (value){
	this._location.hash = value;
	return this;
};

Url.prototype.queryParams = function (){
	return this._queryParams || (this._queryParams = this._location.query || this.parseSearch());
};

Url.prototype.parseSearch = function (){
	var ary;
	var params = {};
	
	for (let i = 0, items = iter$(this._location.search.slice(1).split("&")), len = items.length; i < len; i++) {
		var ary = iter$(items[i].split("=",2));var key = ary[0],value = ary[1];
		if (!value) { continue; };
		params[key] = window.decodeURIComponent(value.replace(/\+/g," "));
	};
	
	return params;
};
