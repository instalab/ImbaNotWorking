var Imba = require('imba'), _1 = Imba.createElement;
var Page = Imba.defineTag('Page', 'main', function(tag){
	
	tag.prototype.isBusy = function(v){ return this._isBusy; }
	tag.prototype.setIsBusy = function(v){ this._isBusy = v; return this; };
	tag.prototype.__status = {'default': 200,watch: 'statusDidSet',name: 'status'};
	tag.prototype.status = function(v){ return this._status; }
	tag.prototype.setStatus = function(v){
		var a = this.status();
		if(v != a) { this._status = v; }
		if(v != a) { this.statusDidSet && this.statusDidSet(v,a,this.__status) }
		return this;
	}
	tag.prototype._status = 200;
	tag.prototype.params = function(v){ return this._params; }
	tag.prototype.setParams = function(v){ this._params = v; return this; };
	
	// this is set by the outer site after calling load the first time
	tag.prototype.isLoaded = function(v){ return this._isLoaded; }
	tag.prototype.setIsLoaded = function(v){ this._isLoaded = v; return this; };
	
	tag.prototype.ref_ = function (ref,ctx){
		ctx['_' + ref] = this;
		this._owner = ctx;
		return this;
	};
	
	tag.prototype.load = function (pars){
		return Promise.resolve(this);
	};
	
	tag.prototype.name = function (){
		return this.constructor._name;
	};
	
	tag.prototype.render = function (){
		return this;
	};
	
	tag.prototype.path = function (){
		return [];
	};
	
	tag.prototype.tools = function (){
		return null;
	};
	
	tag.prototype.masthead = function (){
		return null;
	};
	
	tag.prototype.title = function (){
		return "Scrimba";
	};
	
	tag.prototype.desc = function (){
		return "Scrimba is a community of developers sharing knowledge through interactive coding screencasts.";
	};
	
	tag.prototype.image = function (){
		return null;
	};
	
	tag.prototype.footer = function (){
		let $ = this.$$ || (this.$$ = {}), t0;
		return (t0 = this._footer = this._footer||(t0=_1('div',this)).flag('footer').flag('SiteFooter').flag('wide').setContent(
			t0.$.A || _1('div',t0.$,'A',t0).flag('hbar').setContent([
				_1('div',t0.$,'B','A').setText("Scrimba.com is in beta"),
				_1('div',t0.$,'C','A').flag('flex'),
				// <a.external href='https://gitter.im/scrimba_community/Lobby'> "Chat"
				_1('a',t0.$,'D','A').setHref('https://github.com/scrimba/community/blob/master/TERMS.md').setText("Terms"),
				_1('a',t0.$,'E','A').setHref('https://github.com/scrimba/community/blob/master/FAQ.md').setText("FAQ"),
				_1('a',t0.$,'F','A').setHref('https://github.com/scrimba/community/blob/master/DOCS.md').setText("Docs"),
				_1('a',t0.$,'G','A').setHref('/about').setText("About")
			],2)
		,2)).end((
			t0.$.D.end(),
			t0.$.E.end(),
			t0.$.F.end(),
			t0.$.G.end()
		,true));
	};
	
	tag.prototype.tick = function (){
		if (this.uxa().queue().idle() && this.status() == 200) {
			this.render();
		};
		return this;
	};
	
	tag.prototype.commit = function (){
		if (this.status() == 404 || this.status() == 403) {
			return this;
		};
		
		if (this.isLoaded()) {
			this.render();
		};
		return this;
	};
	
	tag.prototype.mount = function (){
		App.setScrollTop(0);
		return this;
	};
	
	tag.prototype.onbeforenavigate = function (e){
		return this;
	};
})
exports.Page = Page;
