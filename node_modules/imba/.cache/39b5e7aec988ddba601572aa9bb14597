var Imba = require('imba');
var Resource$ = require('../store/Resource'), Resource = Resource$.Resource, ACCESS = Resource$.ACCESS;

function Viewing(){ return Resource.apply(this,arguments) };

Imba.subclass(Viewing,Resource);
exports.Viewing = Viewing; // export class 
Viewing.prototype.dependsOn = function (){
	return [this.cast()];
};

Viewing.prototype.cast = function (){
	return this.db().get(this.cid);
};

Viewing.prototype.user = function (){
	return this.db().get(this.uid);
};

Viewing.prototype.permissions = function (user){
	if (user && user.id == this.uid) {
		return ACCESS.ALL;
	} else {
		return ACCESS.NONE;
	};
};

Viewing.prototype.notifyChannels = function (){
	return this.uid;
};
