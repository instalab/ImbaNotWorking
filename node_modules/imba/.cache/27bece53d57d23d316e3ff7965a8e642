var Imba = require('imba'), _1 = Imba.createElement;
var SidebarPanel = require('./SidebarPanel').SidebarPanel;

var WidgetPanel = Imba.defineTag('WidgetPanel', SidebarPanel, function(tag){
	
	tag.prototype.ontap = function (e){
		this.log('ontap',e.target());
		return this.toggle();
	};
	
	tag.prototype.state = function (){
		return this.data().visible() ? 'on' : 'off';
	};
	
	tag.prototype.render = function (){
		return this.$open(0).setFlag(-1,this.state()).setSref(("sidebar$" + (this.data().id()))).setChildren(
			this.header()
		,3).synced();
	};
	
	tag.prototype.header = function (){
		let $ = this.$$ || (this.$$ = {}), t0;
		return (t0 = this._header = this._header||(t0=_1('header',this)).flag('header').setContent([
			_1('div',t0.$,'A',t0).flag('title'),
			_1('div',t0.$,'B',t0).flag('tools')
		],2)).end((
			t0.$.A.setContent(this.name(),3)
		,true));
	};
})
exports.WidgetPanel = WidgetPanel;
