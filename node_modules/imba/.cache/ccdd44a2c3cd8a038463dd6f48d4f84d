var Imba = require('imba'), _1 = Imba.createElement;
var uxa$ = require('uxa'), Dialog = uxa$.Dialog, TextArea = uxa$.TextArea, TextField = uxa$.TextField;
var PrivacyField = require('./PrivacyField').PrivacyField;

var PlaylistDialog = Imba.defineTag('PlaylistDialog', Dialog, function(tag){
	
	tag.prototype.loadFormData = function (){
		return this.applyFormData(this.data());
	};
	
	tag.prototype.body = function (){
		let $ = this.$$ || (this.$$ = {}), t0;
		return (t0 = this._body = this._body||(t0=_1('div',this)).flag('body').setContent([
			_1(TextField,t0.$,'A',t0).setType('text').setName('title').setLabel('Title').setRequired(true).setPlaceholder('Untitled playlist'),
			_1(TextArea,t0.$,'B',t0).flag('mb-md').setName('description').setLabel('Description').setRequired(true).setDesc('Short description (markdown supported)'),
			_1(PrivacyField,t0.$,'C',t0)
		],2)).end((
			t0.$.A.end(),
			t0.$.B.end(),
			t0.$.C.bindData(this,'data',[]).end()
		,true));
	};
	
	tag.prototype.onuxasubmit = function (){
		var self = this;
		return self.uxa().queue().add(200,function() { return self.data().update(self.formData()); });
	};
})
exports.PlaylistDialog = PlaylistDialog;
