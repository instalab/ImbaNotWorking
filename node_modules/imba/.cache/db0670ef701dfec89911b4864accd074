var Imba = require('imba');
// externs;

var CoverArt = Imba.defineTag('CoverArt', function(tag){
	
	tag.prototype.__data = {watch: 'dataDidSet',name: 'data'};
	tag.prototype.data = function(v){ return this._data; }
	tag.prototype.setData = function(v){
		var a = this.data();
		if(v != a) { this._data = v; }
		if(v != a) { this.dataDidSet && this.dataDidSet(v,a,this.__data) }
		return this;
	};
	
	tag.prototype.dataDidSet = function (data){
		let src = "none";
		
		if (data && typeof encodeURIComponent == 'function') {
			data = encodeURIComponent(data);
			src = ("url('data:image/svg+xml," + data + "')");
			this._bg = src;
		};
		
		this.dom().style['background-image'] = src;
		return this;
	};
})
exports.CoverArt = CoverArt;
