var Imba = require('imba'), _1 = Imba.createElement;
var UserAvatar = require('./UserAvatar').UserAvatar;
var Formatters$ = require('./Formatters'), TimeAgo = Formatters$.TimeAgo, Duration = Formatters$.Duration, ShortCount = Formatters$.ShortCount, Format = Formatters$.Format;
var Tile = require('./Tile').Tile;
var IconButton = require('uxa').IconButton;
var CoverArt = require('./CoverArt').CoverArt;

var UserTile = Imba.defineTag('UserTile', Tile, function(tag){
	
	tag.Renderer = function (data,key,context){
		let key_, $ = this.$$ || (this.$$ = {}), $1;
		return ($[($1 = 'key$' + key)] || _1(UserTile,$,$1,this)).setData(data).setContext(context).end();
	};
	
	tag.prototype.context = function(v){ return this._context; }
	tag.prototype.setContext = function(v){ this._context = v; return this; };
	
	tag.prototype.url = function (){
		return this.data().url();
	};
	
	tag.prototype.render = function (){
		var $ = this.$;
		return this.$open(0).setFlag(-1,this.data().id).setChildren(
			$[0] || _1('div',$,0,this).flag('summary').flag('abs').setContent([
				_1('img',$,1,0).flag('Avatar'),
				_1('div',$,2,0).flag('title').setContent($[3] || _1('a',$,3,2),2),
				_1('div',$,4,0).flag('credits').flag('muted').flag('bullets').flag('social')
			],2)
		,2).synced((
			$[1].setSrc(this.data().avatarUrl(128)).end(),
			$[3].setHref(this.url()).setContent(this.data().name,3).end(),
			$[4].setContent([
				this.data().username ? (
					($[5] || _1('span',$,5,4).flag('profile').setContent($[6] || _1('a',$,6,5),2)).end((
						$[6].setHref(this.data().url()).setText("@" + this.data().username).end()
					,true))
				) : void(0),
				(this.data().github_handle || this.data().username) ? (
					($[7] || _1('span',$,7,4).flag('gh').setContent($[8] || _1('a',$,8,7).dataset('icon','github').setTarget('blank'),2)).end((
						$[8].setHref(("https://github.com/" + (this.data().github_handle || this.data().username))).end()
					,true)) // "github"
				) : void(0),
				this.data().twitter_handle ? (
					($[9] || _1('span',$,9,4).flag('twitter').setContent($[10] || _1('a',$,10,9).dataset('icon','twitter').setTarget('blank'),2)).end((
						$[10].setHref(("https://twitter.com/" + (this.data().twitter_handle))).end()
					,true)) // "twitter"
				) : void(0),
				this.data().medium_handle ? (
					($[11] || _1('span',$,11,4).flag('medium').setContent($[12] || _1('a',$,12,11).dataset('icon','medium').setTarget('blank'),2)).end((
						$[12].setHref(("https://medium.com/@" + (this.data().medium_handle))).end()
					,true)) // "medium"
				) : void(0)
			],1)
		,true));
	};
})
exports.UserTile = UserTile;
